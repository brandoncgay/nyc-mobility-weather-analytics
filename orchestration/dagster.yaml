# Dagster instance configuration for NYC Mobility & Weather Analytics

# Storage configuration - using local filesystem
storage:
  sqlite:
    base_dir: "{{ env_var('DAGSTER_HOME', '/Users/brandoncgay/Documents/Projects/nyc-mobility-weather-analytics/data/dagster_storage') }}"

# Run launcher - local process
run_launcher:
  module: dagster.core.launcher
  class: DefaultRunLauncher

# Run coordinator - queued execution
run_coordinator:
  module: dagster.core.run_coordinator
  class: QueuedRunCoordinator

# Compute logs - store in local logs directory
compute_logs:
  module: dagster.core.storage.local_compute_log_manager
  class: LocalComputeLogManager
  config:
    base_dir: "{{ env_var('DAGSTER_COMPUTE_LOGS', '/Users/brandoncgay/Documents/Projects/nyc-mobility-weather-analytics/logs/dagster_compute') }}"

# Event log storage
event_log_storage:
  module: dagster.core.storage.event_log
  class: SqliteEventLogStorage
  config:
    base_dir: "{{ env_var('DAGSTER_HOME', '/Users/brandoncgay/Documents/Projects/nyc-mobility-weather-analytics/data/dagster_storage') }}"

# Run storage
run_storage:
  module: dagster.core.storage.runs
  class: SqliteRunStorage
  config:
    base_dir: "{{ env_var('DAGSTER_HOME', '/Users/brandoncgay/Documents/Projects/nyc-mobility-weather-analytics/data/dagster_storage') }}"

# Schedule storage
schedule_storage:
  module: dagster.core.storage.schedules
  class: SqliteScheduleStorage
  config:
    base_dir: "{{ env_var('DAGSTER_HOME', '/Users/brandoncgay/Documents/Projects/nyc-mobility-weather-analytics/data/dagster_storage') }}"

# Telemetry - disable for local development
telemetry:
  enabled: false

# Retention policy - keep runs for 30 days
retention:
  schedule:
    purge_after_days: 30
  sensor:
    purge_after_days: 30
